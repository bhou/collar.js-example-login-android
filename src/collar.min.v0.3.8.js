!function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return e[r].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";var r=n(1),o=n(3);global.__collar__||(global.__collar__={collar:null}),global.__collar__.collar||(global.__collar__.collar=r(o),global.__collar__.collar.ns=function(e){var t=r(o["new"]({namespace:e}));return global.__collar__.devtool_enabled&&global.__collar__.devtool_extension(t,global.__collar__.devtool_options),t}),global.__collar__.collar.enableDevtool=function(e){if(!global.__collar__.devtool_extension)return void console.error("Can NOT find collar.js-dev-client. Please make sure you installed it ('npm install collar.js-dev-client') and required it in your entry");e||(e={});var t={};for(var n in e)t[n]=e[n];return global.__collar__.devtool_enabled=!0,global.__collar__.devtool_options=t,e.run=!0,global.__collar__.devtool_extension(global.__collar__.collar,e),global.__collar__.collar}},function(e,t,n){"use strict";var r=n(2),o=n(4),i=n(7),a=n(9),u=n(10),s=n(12),l=n(13),c=n(14),f=n(15),p=n(16),h=n(17),y=n(18),v=n(19),d=n(20),b=n(21);e.exports=function(e){return e.extend({operators:{filter:l.filter,when:l.filter,actuator:c.actuator,actuatorSync:c.actuatorSync,"do":c.actuatorSync,processor:f.processor,processorSync:f.processorSync,map:f.map,sink:p.sink,errors:h.errors,throttle:y.throttle,ref:d.ref,node:b.node},sources:{asList:i.asList,just:i.just,sensor:a.sensor,variable:u.variable,model:s.model,endpoint:v.endpoint,input:v.input,output:v.output},others:{Sensor:a.Sensor,Variable:u.Variable,Model:s.Model,Filter:l.Filter,Actuator:c.Actuator,ActuatorSync:c.ActuatorSync,Processor:f.Processor,ProcessorSync:f.ProcessorSync,Signal:o,Node:r}})}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=function f(e,t,n){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,t);if(void 0===r){var o=Object.getPrototypeOf(e);return null===o?void 0:f(o,t,n)}if("value"in r)return r.value;var i=r.get;if(void 0!==i)return i.call(n)},s=n(3).Bouton,l=n(4),c=function(e){function t(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],n=arguments[1];r(this,t);var i=o(this,Object.getPrototypeOf(t).call(this,e,n));return i._type="node",i._namespace=e.namespace||t.__namespace__,i._comment=e.comment,i._features=["Node"],i._inputs=e.inputs||{},i._outputs=e.outputs||{},e.todo&&i.addFeature("todo"),i}return i(t,e),a(t,[{key:"addFeature",value:function(e){return this._features.indexOf(e)<0&&this._features.push(e),this}},{key:"removeFeature",value:function(e){var t=this._features.indexOf(e);return t>=0&&this._features.splice(t,1),this}},{key:"getFeatures",value:function(){return this._features}},{key:"hasFeature",value:function(e){return this._features.indexOf(e)>=0}},{key:"onSignal",value:function(e){var t=this;return this.invokeObservers("preFilter",e),this.accept(e)?(this.invokeObservers("postFilter",e,!0),this.invokeObservers("preAct",e),this.act(e,function(n,r){if(t.invokeObservers("postAct",e,n,r),n)throw n}),this.invokeObservers("preProcess",e),this.process(e,function(n,r){if(t.invokeObservers("postProcess",e,n,r),n)throw n;t.send(r)}),this):(this.invokeObservers("postFilter",e,!1),this.request(),this)}},{key:"send",value:function(e){return l.isSignal(e)?u(Object.getPrototypeOf(t.prototype),"send",this).call(this,e):u(Object.getPrototypeOf(t.prototype),"send",this).call(this,new l(e))}},{key:"watch",value:function(e){}},{key:"accept",value:function(e){return!0}},{key:"act",value:function(e,t){t()}},{key:"process",value:function(e,t){t(null,e)}},{key:"onRequest",value:function(e){return this.onNext(e),this}},{key:"onNext",value:function(e){this.request(e)}},{key:"isErrorSignal",value:function(e){return l.isSignal(e)&&l.hasError(e)}},{key:"isEndSignal",value:function(e){return l.isSignal(e)&&l.isEnd(e)}},{key:"throwError",value:function(e,t){return this.send(t.setError(e))}},{key:"to",value:function(e,n){return"string"!=typeof e?n=e:n._comment=e,u(Object.getPrototypeOf(t.prototype),"to",this).call(this,n)}},{key:"type",get:function(){return this._type}},{key:"inputs",get:function(){return this._inputs},set:function(e){var t=this;return Array.isArray(e)?e.forEach(function(e){t._inputs[e]=""}):this._inputs=e,this}},{key:"outputs",get:function(){return this._outputs},set:function(e){var t=this;return Array.isArray(e)?e.forEach(function(e){t._outputs[e]=""}):this._outputs=e,this}}]),t}(s);e.exports=c},function(e,t){e.exports=require("bouton")},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(5),u=n(6),s=function(){function e(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],n=arguments.length<=1||void 0===arguments[1]?{mode:"active"}:arguments[1];r(this,e),this._from=[],u.Iterable.isIterable(t)?this._immutable=t:t instanceof Error?this._immutable=u.fromJS({__type__:"Signal",_seq:a.v1(),_cmd:n,_end:!1,_payload:null,_tags:{}}).set("_error",t):this._immutable=u.fromJS({__type__:"Signal",_seq:a.v1(),_cmd:n,_error:null,_end:!1,_payload:t,_tags:{}})}return i(e,[{key:"setFrom",value:function(e){return this._from.push(e),this}},{key:"new",value:function(t){var n=this.seq;return new e(t).setSeq(n)}},{key:"get",value:function(e){var t=[];t="string"==typeof e?e.split("."):e,t.unshift("_payload");var n=this._immutable.getIn(t);return u.Iterable.isIterable(n)?n.toJS():n}},{key:"set",value:function(t,n){var r=[];return r="string"==typeof t?t.split("."):t,r.unshift("_payload"),new e(this._immutable.setIn(r,n))}},{key:"setPayload",value:function(t){return new e(this._immutable.set("_payload",t))}},{key:"getResult",value:function(){return this.get("__result__")}},{key:"setResult",value:function(e){return this.set("__result__",e)}},{key:"del",value:function(t){var n=[];return n="string"==typeof t?t.split("."):t,n.unshift("_payload"),new e(this._immutable.deleteIn(n))}},{key:"getTag",value:function(e){var t=this._immutable.getIn(["_tags",e]);return u.Iterable.isIterable(t)?t.toJS():t}},{key:"getCmd",value:function(e){var t=[];t="string"==typeof e?e.split("."):e?e:[],t.unshift("_cmd");var n=this._immutable.getIn(t);return u.Iterable.isIterable(n)?n.toJS():n}},{key:"setCmd",value:function(t,n){var r=[];return r="string"==typeof t?t.split("."):t,r.unshift("_cmd"),new e(this._immutable.setIn(r,n))}},{key:"delCmd",value:function(t){var n=[];return n="string"==typeof t?t.split("."):t,n.unshift("_cmd"),new e(this._immutable.deleteIn(n))}},{key:"setTag",value:function(t,n){return new e(this._immutable.setIn(["_tags",t],n))}},{key:"delTag",value:function(t){return new e(this._immutable.deleteIn(["_tags",t]))}},{key:"setSeq",value:function(t){return new e(this._immutable.set("_seq",t))}},{key:"setError",value:function(t){return new e(this._immutable.set("_error",t))}},{key:"setEnd",value:function(t){return new e(this._immutable.set("_end",t))}},{key:"hasError",value:function(){return this.error instanceof Error}},{key:"isEnd",value:function(){return!!this.end}},{key:"__type__",get:function(){return this._immutable.get("__type__")}},{key:"seq",get:function(){return this._immutable.get("_seq")}},{key:"id",get:function(){return this._immutable.get("_seq")}},{key:"payload",get:function(){var e=this._immutable.get("_payload");return u.Iterable.isIterable(e)?e.toJS():e}},{key:"error",get:function(){return this._immutable.get("_error")}},{key:"end",get:function(){return this._immutable.get("_end")}},{key:"tags",get:function(){var e=this._immutable.get("_tags");return u.Iterable.isIterable(e)?e.toJS():e}},{key:"from",get:function(){return this._from}}],[{key:"isSignal",value:function(e){return"object"===("undefined"==typeof e?"undefined":o(e))&&"Signal"===e.__type__}},{key:"hasError",value:function(e){return"object"===("undefined"==typeof e?"undefined":o(e))&&e.error instanceof Error}},{key:"isEnd",value:function(e){return!("object"!==("undefined"==typeof e?"undefined":o(e))||!e.end)}},{key:"Error",value:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(t){var n=t;return"string"==typeof t&&(n=new Error(t)),new e(t)})},{key:"End",value:function(){var t=new e;return t.setEnd(!0)}}]),e}();e.exports=s},function(e,t){e.exports=require("node-uuid")},function(e,t){e.exports=require("immutable")},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e,t){var n={comment:e,source:t};return Array.isArray(e)&&(n.comment=null,n.source=e),new p(n)}function u(e,t){var n={comment:e,source:t};return t||(n.comment=null,n.source=e),new h(n)}var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=function y(e,t,n){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,t);if(void 0===r){var o=Object.getPrototypeOf(e);return null===o?void 0:y(o,t,n)}if("value"in r)return r.value;var i=r.get;if(void 0!==i)return i.call(n)},c=n(2),f=n(4),p=(n(8),function(e){function t(e,n){r(this,t);var i=o(this,Object.getPrototypeOf(t).call(this,e,n));return i._type="passive",i.addFeature("passive"),i._comment=e.comment||"passive array source",i.source=e.source,i.index=0,i}return i(t,e),s(t,[{key:"onNext",value:function(e){this.source.length===this.index?(this.send((new f).setEnd(!0)),this.index++):this.source.length>this.index&&(this.send(new f(this.source[this.index])),this.index++)}},{key:"send",value:function(e){f.isSignal(e)?l(Object.getPrototypeOf(t.prototype),"send",this).call(this,e.setCmd("mode","passive")):l(Object.getPrototypeOf(t.prototype),"send",this).call(this,new f(e,{mode:"passive"}))}}]),t}(c)),h=function(e){function t(e,n){r(this,t);var i=o(this,Object.getPrototypeOf(t).call(this,e,n));return i.addFeature("passive"),i._comment=e.comment||"passive array source",i.source=e.source,i.visited=0,i}return i(t,e),s(t,[{key:"onNext",value:function(e){0==this.visited?(this.send(new f(this.source)),this.visited++):1==this.visited&&(this.send((new f).setEnd(!0)),this.visited++)}},{key:"send",value:function(e){f.isSignal(e)?l(Object.getPrototypeOf(t.prototype),"send",this).call(this,e.setCmd("mode","passive")):l(Object.getPrototypeOf(t.prototype),"send",this).call(this,new f(e,{mode:"passive"}))}}]),t}(c);e.exports={asList:a,just:u}},function(e,t){"use strict";e.exports={prepareNodeOptions:function(e,t,n,r,o){return"function"==typeof e?o?{comment:o,fn:e}:{fn:e}:"function"==typeof t?{comment:e,fn:t}:"function"==typeof n?{comment:e,inputs:t,fn:n}:"function"==typeof r?{comment:e,inputs:t,outputs:n,fn:r}:r?void 0:{comment:e,inputs:t,outputs:n,fn:r,todo:!0}}}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e,t){"function"==typeof e&&(t=e,e="sensor");var n={comment:e,fn:t};return n.fn||(n.todo=!0),new l(n)}var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(2),l=(n(8),function(e){function t(e,n){r(this,t);var i=o(this,Object.getPrototypeOf(t).call(this,e,n));return i._type="sensor",i.fn=e.fn||function(e){},i.addFeature("sensor"),i.addFeature("active"),i.watch(),i}return i(t,e),u(t,[{key:"watch",value:function(e){this.fn.call(this,e)}}]),t}(s));e.exports={Sensor:l,sensor:a}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e,t,n){return new c({comment:e,name:t,value:n})}var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(2),l=n(11),c=function(e){function t(e,n){r(this,t);var i=o(this,Object.getPrototypeOf(t).call(this,e,n));return i._type="variable",i._value=i.options.value||0==i.options.value?i.options.value:{},i._name=i.options.name,i._comment=i.options.comment||"var '"+i._name+"'",i.addFeature("variable"),i.addFeature("active"),i.inputs={value:"the new value"},i.outputs={type:"always be 'variableChanged'",value:"new value of the variable",before:"old value"},i}return i(t,e),u(t,[{key:"get",value:function(e){return l.get(this._value,e)}},{key:"set",value:function(e,t){if(!e||""===e)return void(this.value=t);var n=l.get(this._value,e);l.set(this._value,e,t),this.send({type:"variableChanged",value:this._value,before:n})}},{key:"onSignal",value:function(e){var t=e.get("value");this.value=t}},{key:"value",get:function(){return this._value},set:function(e){var t=this._value;this._value=e,this.send({type:"variableChanged",value:this._value,before:t})}}]),t}(s);e.exports={Variable:c,variable:a}},function(e,t){e.exports=require("object-path")},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e,t,n){return new c({comment:e,name:t,value:n})}var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(2),l=n(11),c=function(e){function t(e,n){r(this,t);var i=o(this,Object.getPrototypeOf(t).call(this,e,n));return i._type="model",i._value=i.options.value||0==i.options.value?i.options.value:{},i._name=i.options.name,i._comment=i.options.comment||"model '"+i._name+"'",i.addFeature("model"),i.addFeature("active"),i.inputs={operation:"one of 'set', 'insert', 'append', and 'delete'",path:"the path to make de operation, empty for root",index:"optional, only need for 'insert'",value:"optional, only need for 'set', 'insert', and 'append'"},i.outputs={type:"always be 'modelChanged'",operation:"the operation that causes the change, one of 'set', 'insert', 'append', and 'delete'",path:"where does the change happen",value:"the value of the model",appended:"the appended value",index:"the position of the newly inserted value",inserted:"the inserted value",before:"old value of the changed part",after:"new value of the changed part"},i}return i(t,e),u(t,[{key:"get",value:function(e){return l.get(this._value,e)}},{key:"set",value:function(e,t,n){if(!e||""===e){var r=this._value;return this._value=t,void(n?this.send(n["new"]({type:"modelChanged",operation:"set",path:null,value:this._value,before:r,after:this._value})):this.send({type:"modelChanged",operation:"set",path:null,value:this._value,before:r,after:this._value}))}var o=l.get(this._value,e);l.set(this._value,e,t),n?this.send(n["new"]({type:"modelChanged",operation:"set",path:e,value:this._value,before:o,after:t})):this.send({type:"modelChanged",operation:"set",path:e,value:this._value,before:o,after:t})}},{key:"insert",value:function(e,t,n,r){var o=l.get(this._value,e);l.insert(this._value,e,t,n),r?this.send(r["new"]({type:"modelChanged",operation:"insert",path:e,index:n,value:this._value,inserted:t,before:o,after:l.get(this._value,e)})):this.send({type:"modelChanged",operation:"insert",path:e,index:n,value:this._value,inserted:t,before:o,after:l.get(this._value,e)})}},{key:"append",value:function(e,t,n){var r=this,o=l.get(this._value,e);Array.isArray(t)?t.forEach(function(t){l.push(r._value,e,t)}):l.push(this._value,e,t),n?this.send(n["new"]({type:"modelChanged",operation:"append",path:e,value:this._value,appended:t,before:o,after:l.get(this._value,e)})):this.send({type:"modelChanged",operation:"append",path:e,value:this._value,appended:t,before:o,after:l.get(this._value,e)})}},{key:"del",value:function(e,t){var n=l.get(this._value,e);l.del(this._value,e),t?this.send(t["new"]({type:"modelChanged",operation:"delete",path:e,value:this._value,before:n,after:null})):this.send({type:"modelChanged",operation:"delete",path:e,value:this._value,before:n,after:null})}},{key:"onSignal",value:function(e){var t=e.get("operation")||"set";if("set"===t){var n=e.get("path");this.set(n,e.get("value"),e)}else if("insert"===t){var n=e.get("path"),r=e.get("index");n&&null!=r&&void 0!=r&&this.insert(n,e.get("value"),r,e)}else if("append"===t){var n=e.get("path");n&&this.append(n,e.get("value"),e)}else if("delete"===t){var n=e.get("path");n&&this.del(n,e)}}},{key:"value",get:function(){return this._value},set:function(e){var t=this._value;this._value=e,this.send({type:"modelChanged",operation:"set",path:null,value:this._value,before:t,after:this._value})}}]),t}(s);e.exports={Model:c,model:a}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e,t,n,r){return new c(l.prepareNodeOptions(e,t,n,r,"filter"))}var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(2),l=n(8),c=function(e){function t(e,n){r(this,t);var i=o(this,Object.getPrototypeOf(t).call(this,e,n));return i._type="filter",i._comment||(i._comment="filter"),i.fn=e.fn||function(e){return!0},i.addFeature("filter"),i}return i(t,e),u(t,[{key:"accept",value:function(e){return this.fn(e)}},{key:"onSignal",value:function(e){this.accept(e)?this.send(e):this.request()}}]),t}(s);e.exports={Filter:c,filter:a}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e,t,n,r){return new f(c.prepareNodeOptions(e,t,n,r,"actuator"))}function u(e,t,n,r){return new p(c.prepareNodeOptions(e,t,n,r,"actuator"))}var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(2),c=n(8),f=function(e){function t(e,n){r(this,t);var i=o(this,Object.getPrototypeOf(t).call(this,e,n));return i._type="actuator",i.fn=e.fn||function(e,t){t()},i.addFeature("actuator"),i}return i(t,e),s(t,[{key:"act",value:function(e,t){this.fn.call(this,e,t)}},{key:"onSignal",value:function(e){var t=this;this.act(e,function(n,r){return n?void t.throwError(n,e):void(r?t.send(e.set("__result__",r)):t.send(e))})}}]),t}(l),p=function(e){function t(e,n){r(this,t);var i=o(this,Object.getPrototypeOf(t).call(this,e,n));return i._type="actuator.sync",i.fn=e.fn||function(e){},i.addFeature("actuator"),i}return i(t,e),s(t,[{key:"act",value:function(e,t){var n=this.fn.call(this,e);t(null,n)}},{key:"onSignal",value:function(e){var t=this;this.act(e,function(n,r){if(n)throw n;r?t.send(e.set("__result__",r)):t.send(e)})}}]),t}(l);e.exports={Actuator:f,ActuatorSync:p,actuator:a,actuatorSync:u}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e,t,n,r){return new p(f.prepareNodeOptions(e,t,n,r,"processor"))}function u(e,t,n,r){return new h(f.prepareNodeOptions(e,t,n,r,"processor"))}function s(e,t,n,r){return new h(f.prepareNodeOptions(e,t,n,r,"map"))}var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(2),f=n(8),p=function(e){function t(e,n){r(this,t);var i=o(this,Object.getPrototypeOf(t).call(this,e,n));return i._type="processor",i.fn=e.fn||function(e,t){t(null,e)},i.addFeature("processor"),i.addFeature("async"),i}return i(t,e),l(t,[{key:"process",value:function(e,t){this.fn.call(this,e,t)}},{key:"onSignal",value:function(e){var t=this;this.process(e,function(n,r){n?t.throwError(n,e):t.send(r)})}}]),t}(c),h=function(e){function t(e,n){r(this,t);var i=o(this,Object.getPrototypeOf(t).call(this,e,n));return i._type="processor.sync",i.fn=e.fn||function(e){return e},i.addFeature("processor"),i.addFeature("sync"),i}return i(t,e),l(t,[{key:"process",value:function(e,t){var n=this.fn.call(this,e);t(null,n)}},{key:"onSignal",value:function(e){var t=this;this.process(e,function(e,n){if(e)throw e;t.send(n)})}}]),t}(c);e.exports={Processor:p,ProcessorSync:h,processor:a,processorSync:u,map:s}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(){return new l}var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(2),l=function(e){function t(e,n){r(this,t);var i=o(this,Object.getPrototypeOf(t).call(this,e,n));return i._type="sink",i._comment="drive passive source",i}return i(t,e),u(t,[{key:"onSignal",value:function(e){this.request()}},{key:"from",value:function(e){this.request()}}]),t}(s);e.exports={sink:a}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e,t,n,r){return new c(l.prepareNodeOptions(e,t,n,r,"error handler"))}var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(2),l=n(8),c=function(e){function t(e,n){r(this,t);var i=o(this,Object.getPrototypeOf(t).call(this,e,n));return i._type="errorhandler",i.fn=e.fn||function(e){},i.addFeature("errorhandler"),i}return i(t,e),u(t,[{key:"onError",value:function(e){var t=this;this.fn(e,function(e){t.send(e)})}}]),t}(s);e.exports={errors:a}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e,t){var n={};return n="number"==typeof e?{ms:t}:{comment:e,ms:t},new l(n)}var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(2),l=(n(8),function(e){function t(e,n){r(this,t);var i=o(this,Object.getPrototypeOf(t).call(this,e,n));return i._type="throttle",i.ms=e.ms,i._comment=e.comment||"throttle ("+ms+" ms)",i.last=(new Date).getTime(),i.addFeature("filter"),i}return i(t,e),u(t,[{key:"onSignal",value:function(e){var t=(new Date).getTime();t-this.ms>=this.last&&(this.last=t,this.send(e))}}]),t}(s));e.exports={throttle:a}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];"string"!=typeof e&&console.error(new Error("endpoint must have a name")),t.mode="input",t.comment=e;var n=new f(t);return n}function u(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];"string"!=typeof e&&console.error(new Error("endpoint must have a name")),t.mode="output",t.comment=e;var n=new f(t);return n}function s(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];"string"!=typeof e&&console.error(new Error("endpoint must have a name")),t.comment=e;var n=new f(t);return n}var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(2),f=function(e){function t(e,n){r(this,t);var i=o(this,Object.getPrototypeOf(t).call(this,e,n));return e.mode||(e.mode="input"),(!e.mode||"input"!==e.mode&&"output"!==e.mode)&&(console.warn("invalid endpoint mode [",e.mode,"], use 'input' instead"),e.mode="input"),i._type="endpoint."+e.mode,i._name=i._comment,i.addFeature("endpoint"),i.addFeature(e.mode),i}return i(t,e),l(t,[{key:"accept",value:function(e){var t=this.options.filter||[];if(0==t.length)return!0;var n=!1,r=!0,o=!1,i=void 0;try{for(var a,u=t[Symbol.iterator]();!(r=(a=u.next()).done);r=!0){var s=a.value;n=!0;for(var l in s)if(e.get(l)!==s[l]){n=!1;break}if(n)break}}catch(c){o=!0,i=c}finally{try{!r&&u["return"]&&u["return"]()}finally{if(o)throw i}}return n&&this.invokeObservers("enter endpoint",e),n}},{key:"act",value:function(e,t){t(),this.invokeObservers("leave endpoint",e)}}]),t}(c);e.exports={endpoint:s,input:a,output:u}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e,t){var n={};n=t?{comment:e,ref:t}:{comment:"go to "+e._comment,
ref:e};var r=new l(n);return r}var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(2),l=function(e){function t(e,n){r(this,t);var i=o(this,Object.getPrototypeOf(t).call(this,e,n));return i._ref=e.ref,i._type="reference",i.addFeature("reference"),i.addFeature("actuator"),i}return i(t,e),u(t,[{key:"act",value:function(e,t){this._ref&&this._ref.push(e),t()}}]),t}(s);e.exports={ref:a}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return"string"==typeof e?t.comment=e:t=e,new c(t)}var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function f(e,t,n){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,t);if(void 0===r){var o=Object.getPrototypeOf(e);return null===o?void 0:f(o,t,n)}if("value"in r)return r.value;var i=r.get;if(void 0!==i)return i.call(n)},l=n(2),c=(n(8),function(e){function t(e,n){r(this,t);var i=o(this,Object.getPrototypeOf(t).call(this,e,n));return i._type="node",i.onSignalDelegate=i.options.onSignal,i.onErrorDelegate=i.options.onError,i.onEndDelegate=i.options.onEnd,i.watchDelegate=i.options.watch,i.acceptDelegate=i.options.accept,i.actDelegate=i.options.act,i.processDelegate=i.options.process,i.onNextDelegate=i.options.onNext,i.addFeature("general"),i.addFeature("async"),i}return i(t,e),u(t,[{key:"onSignal",value:function(e){return this.onSignalDelegate?this.onSignalDelegate.call(this,e):s(Object.getPrototypeOf(t.prototype),"onSignal",this).call(this,e)}},{key:"onError",value:function(e){return this.onErrorDelegate?this.onErrorDelegate.call(this,e):s(Object.getPrototypeOf(t.prototype),"onError",this).call(this,e)}},{key:"onEnd",value:function(e){return this.onEndDelegate?this.onEndDelegate.call(this,e):s(Object.getPrototypeOf(t.prototype),"onEnd",this).call(this,e)}},{key:"watch",value:function(e){return this.watchDelegate?this.watchDelegate.call(this,e):s(Object.getPrototypeOf(t.prototype),"watch",this).call(this,e)}},{key:"accept",value:function(e){return this.acceptDelegate?this.acceptDelegate.call(this,e):s(Object.getPrototypeOf(t.prototype),"accept",this).call(this,e)}},{key:"act",value:function(e,n){return this.actDelegate?this.actDelegate.call(this,e,n):s(Object.getPrototypeOf(t.prototype),"act",this).call(this,e,n)}},{key:"process",value:function(e,n){return this.processDelegate?this.processDelegate.call(this,e,n):s(Object.getPrototypeOf(t.prototype),"process",this).call(this,e,n)}}]),t}(l));e.exports={node:a}}]);